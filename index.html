<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Quiz Question Editor</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

</head>
<body>
  <h1>My Mini App</h1>

    <div id="data-display">
        </div>

    <br>

    <button id="send-button">Send Data to Bot</button>


  <div class="floating-actions">
    <div class="floating-inner">
      <button id="saveBtn" class="btn btn-save"><i class="fas fa-save"></i> Save Changes</button>
      <button id="exitBtn" class="btn btn-exit"><i class="fas fa-sign-out-alt"></i> Exit Editor</button>
    </div>
  </div>
    <script>
        // This function runs when the page is fully loaded
        window.onload = function() {
            // Get the Telegram Web App object
            const tg = window.Telegram.WebApp;
            tg.ready(); // Inform the Telegram client that the app is ready

            const displayDiv = document.getElementById('data-display');
            
            // --- 1. RECEIVING DATA FROM THE BOT ---
            // We get the query parameters from the URL
            const urlParams = new URLSearchParams(window.location.search);
            const userId = urlParams.get('user_id');
            const firstName = urlParams.get('first_name');

            // Check if we received data
            if (userId && firstName) {
                displayDiv.innerHTML = `<b>Data received from bot:</b><br>User ID: ${userId}<br>First Name: ${firstName}`;
            } else {
                displayDiv.innerHTML = "<b>No data received from the bot.</b>";
            }
            
            // --- 2. SENDING DATA TO THE BOT ---
            const sendButton = document.getElementById('send-button');
            sendButton.addEventListener('click', function() {
                // This is the data we will send back to the bot
                const dataToSend = {
                    message: "Hello from the Web App!",
                    status: "ok"
                };

                // Use the sendData method to send data to the bot
                // The data must be a string, so we use JSON.stringify
                tg.sendData(JSON.stringify(dataToSend));
                
                // Optional: Close the web app after sending data
                // tg.close();
            });
        };
    </script>
  
</body>
</html>